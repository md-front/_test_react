(this.webpackJsonphh_react=this.webpackJsonphh_react||[]).push([[0],[,,function(e,t){e.exports={setLS:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},getLS:function(e){return JSON.parse(localStorage.getItem(e))},sortByReduction:function(e,t){return e.sort((function(e,a){return a[t]-e[t]}))},sortByIncreasing:function(e,t){return e.sort((function(e,a){return e[t]-a[t]}))},checkItems:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e&&e.some((function(e){return a?e[t]:!e[t]}))}}},,,,,,function(e,t,a){e.exports={link:"ItemsVacancy_link__3nD_C",del:"ItemsVacancy_del__2pi-D",text:"ItemsVacancy_text__3Crsq",popup:"ItemsVacancy_popup__3FzUR",salary:"ItemsVacancy_salary__2N1lY",description:"ItemsVacancy_description__cp2LA"}},,,,,function(e,t,a){e.exports={favColor:"rgba(255, 165, 0,.4)",newColor:"rgba(128, 0, 128, .35)",junColor:"rgba(0, 128, 0, .4)",salaryColor:"rgba(255, 127, 80, .5)",defaultColor:"rgba(169, 169, 169, .4)",btns:"Header_btns__1rSaA",btn:"Header_btn__1y_LX",disabled:"Header_disabled__1cPx7",fav:"Header_fav__3aTWp Header_btn__1y_LX","fav-disabled":"Header_fav-disabled__3H-5I Header_fav__3aTWp Header_btn__1y_LX Header_disabled__1cPx7",del:"Header_del__3kqke Header_btn__1y_LX","del-disabled":"Header_del-disabled__QbXf1 Header_del__3kqke Header_btn__1y_LX Header_disabled__1cPx7"}},,function(e,t,a){e.exports={item:"ItemsItem_item__1l320",jun:"ItemsItem_jun__3z_Xx ItemsItem_item__1l320",title:"ItemsItem_title__1VNP3"}},,function(e,t,a){e.exports={favColor:"rgba(255, 165, 0,.4)",newColor:"rgba(128, 0, 128, .35)",junColor:"rgba(0, 128, 0, .4)",salaryColor:"rgba(255, 127, 80, .5)",defaultColor:"rgba(169, 169, 169, .4)",group:"ItemsInner_group__BZ0tP",title:"ItemsInner_title__2PTUb",is_fav:"ItemsInner_is_fav__SDvDa ItemsInner_group__BZ0tP",is_new:"ItemsInner_is_new__2rtEK ItemsInner_group__BZ0tP",is_jun:"ItemsInner_is_jun__37x1D ItemsInner_group__BZ0tP",is_salary:"ItemsInner_is_salary__2SOrw ItemsInner_group__BZ0tP",default:"ItemsInner_default___YoW2 ItemsInner_group__BZ0tP"}},function(e,t,a){e.exports={title:"ItemsTitle_title__x8aKA",active:"ItemsTitle_active__JoYEW ItemsTitle_title__x8aKA"}},,,function(e,t,a){e.exports=a.p+"static/media/star.80b7ccfb.svg"},function(e,t,a){e.exports=a.p+"static/media/del.0ce28e41.svg"},,function(e,t,a){e.exports={nav:"Items_nav__j5C8O"}},function(e,t,a){e.exports={items:"ItemsList_items__1dzit"}},function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(20),r=a.n(s),c=(a(31),a(11)),o=a(16),l=a(3),u=a(4),m=a(1),d=a(6),v=a(5),p=a(2),h=a(13),f=a.n(h),_=a(21),b=a.n(_),k=a(22),I=a.n(k),y=[{img:b.a,className:"fav",disableClassName:"fav-disabled",disableName:"isFavActive",text:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",actionType:"favorites"},{img:I.a,className:"del",disableClassName:"del-disabled",disableName:"isDelActive",text:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0441\u043a\u0440\u044b\u0442\u044b\u0435 \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0438",actionType:"blacklist"}],g=function(e){return i.a.createElement("header",null,i.a.createElement("div",{className:f.a.btns},y.map((function(t,a){return i.a.createElement("button",{type:"button",key:a,className:e[t.disableName]?f.a[t.className]:f.a[t.disableClassName],onClick:function(){return e.clearItems(t.actionType)}},t.text,i.a.createElement("img",{src:t.img}))}))))},j=a(23),O=a(24),E=a.n(O),w=a(9),A=a(7),C=a.n(A),S=a(14),V=a(17),N=a.n(V),x=a(25),L=a.n(x),H=a(15),D=a.n(H),B=a(8),T=a.n(B),P=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isHover:!1},n.toggleBlacklist=n.toggleBlacklist.bind(Object(m.a)(n)),n.handleMouseHover=n.handleMouseHover.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"handleMouseHover",value:function(){var e=!this.state.isHover;this.setState({isHover:e})}},{key:"toggleBlacklist",value:function(e){e.preventDefault(),e.stopPropagation();var t={id:this.props.vacancy.id,parentId:this.props.vacancy.employer.id};this.props.handleClickAction("blacklist",t)}},{key:"render",value:function(){var e=this.props.vacancy,t=e.salary;return i.a.createElement("a",{href:e.alternate_url,className:T.a.link,onMouseEnter:this.handleMouseHover,onMouseLeave:this.handleMouseHover,target:"_blank"},i.a.createElement("span",{className:T.a.text},i.a.createElement("span",null,t&&"$","\xa0"),e.name),this.state.isHover&&i.a.createElement("span",{className:T.a.popup},t&&i.a.createElement("span",{className:T.a.salary},t.from,t.from&&t.to?" - ":"",t.to),e.snippet&&e.snippet.requirement&&i.a.createElement("span",{className:T.a.description,dangerouslySetInnerHTML:{__html:this.props.vacancy.snippet.requirement}})),i.a.createElement("button",{type:"button",className:T.a.del,onClick:this.toggleBlacklist}))}}]),a}(i.a.Component);function R(e){var t=e.item.items[0].employer.logo_urls;return i.a.createElement("div",{className:e.item.is_jun?D.a.jun:D.a.item},i.a.createElement("div",{className:D.a.title,onClick:function(){var t={id:e.item.id,parentId:e.item.sort.value};e.handleClickAction("favorites",t)},title:"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"},i.a.createElement("h2",null,e.item.name),t&&i.a.createElement("img",{src:t[90]})),e.item.items.map((function(t,a){return!t.is_del&&i.a.createElement(P,{vacancy:t,key:a,handleClickAction:e.handleClickAction})})))}function G(e){return i.a.createElement("div",{className:L.a.items},e.items.map((function(t,a){return t.haveVisibleItem&&i.a.createElement(R,{item:t,key:a,handleClickAction:e.handleClickAction})})))}var M={is_fav:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",is_new:"\u041d\u043e\u0432\u044b\u0435 \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0438",is_jun:"\u0412\u0430\u043a\u0430\u043d\u0441\u0438\u0438 \u0434\u043b\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0445",is_salary:"\u0412\u0430\u043a\u0430\u043d\u0441\u0438\u0438 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043e\u043a\u043b\u0430\u0434\u043e\u043c",default:"\u0411\u0435\u0437 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432"};function Y(e){return i.a.createElement("div",{className:N.a[e.itemsList.name]},i.a.createElement("h3",{className:N.a.title},M[e.itemsList.name],":"),i.a.createElement(G,{items:e.itemsList.items,handleClickAction:e.handleClickAction}))}var J={favorites:"is_fav",blacklist:"is_del"},U={name:"default",value:0},X=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={groups:e.section.groups||[],isLoaded:!!e.section.groups,vacancies:e.section.vacancies||[]},n.favoritesAction=n.favoritesAction.bind(Object(m.a)(n)),n.blacklistAction=n.blacklistAction.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.section.visibleVacancies||Object(S.a)(C.a.mark((function t(){var a,n,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getVacancies();case 2:a=t.sent,n=e.groupVacancies(a),i={visibleVacancies:e.visibleVacancies(),groups:n,vacancies:e.state.vacancies},e.props.handleLoaded(e.props.section.id,i),e.setState({groups:n,isLoaded:!0});case 7:case"end":return t.stop()}}),t)})))()}},{key:"componentDidUpdate",value:function(e){var t=this;[{name:"favorites",init:this.favoritesAction},{name:"blacklist",init:this.blacklistAction}].forEach((function(a){return t.activityCheck(a,e)}))}},{key:"visibleVacancies",value:function(){return this.state.vacancies.length-Object.keys(this.props.blacklist[this.props.section.id]).length}},{key:"activityCheck",value:function(e,t){var a=t[e.name][this.props.section.id],n=this.props[e.name][this.props.section.id],i=Object.keys(a),s=Object.keys(n);if(i.length!==s.length)if(i.length>s.length){i.filter((function(e){return!s.includes(e)})).forEach((function(t){var n=a[t];e.init(e.name,t,n,!1)}))}else{var r=s.find((function(e){return!i.includes(e)})),c=n[r];e.init(e.name,r,c,!0)}}},{key:"favoritesAction",value:function(e,t,a,n){var i,s,r,c,o=Object(w.a)(this.state.groups),l={adding:{parentId:a,newGroupId:function(){return 4},createNewGroup:function(){return this.createGroup("is_fav",4)}},removing:{parentId:4,newGroupId:function(e){return e.sort.value},createNewGroup:function(){return this.createGroup(r.sort.name,r.sort.value)}}},u=n?l.adding:l.removing;i=o.find((function(e){return e.sortValue===u.parentId})),r=i.items.find((function(e,a){return c=a,e.id===t})),(s=o.find((function(e){return e.sortValue===u.newGroupId(r)})))||(s=u.createNewGroup.call(this),o.push(s)),r.is_fav=n,s.items.push(r),i.items.splice(c,1),s.haveVisibleItem=Object(p.checkItems)(s.items,"haveVisibleItem"),i.haveVisibleItem=Object(p.checkItems)(i.items,"haveVisibleItem"),o=Object(p.sortByReduction)(o,"sortValue"),this.props.handleLoaded(this.props.section.id,{groups:o}),this.setState({groups:o})}},{key:"blacklistAction",value:function(e,t,a){var n,i,s,r=Object(w.a)(this.state.groups),c=Object(w.a)(this.state.vacancies),o=c.find((function(e){return e.id===t}));for(var l in o[J[e]]=!o[J[e]],r)if(n=r[l],i=n.items.find((function(e,t){return s=t,e.id===a})))break;i.haveVisibleItem=Object(p.checkItems)(i.items,"is_del",!1);var u=U;if(i.items.forEach((function(e){!e.is_del&&e.sort.value>u.value&&(u=e.sort)})),!i.is_fav&&i.sort.value!==u.value){i.sort=u;var m=r.find((function(e){return e.sortValue===i.sort.value}));m||(m=this.createGroup(i.sort.name,i.sort.value),r.push(m)),m.items.push(i),n.items.splice(s,1),m.haveVisibleItem=Object(p.checkItems)(m.items,"haveVisibleItem"),r=Object(p.sortByReduction)(r,"sortValue")}n.haveVisibleItem=Object(p.checkItems)(n.items,"haveVisibleItem");var d={vacancies:c,groups:r=Object(p.sortByReduction)(r,"sortValue"),visibleVacancies:this.visibleVacancies()};this.props.handleLoaded(this.props.section.id,d),this.setState({vacancies:c,groups:r})}},{key:"getVacancies",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,a,n,i,s,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVacanciesStep(0,"noExperience");case 2:return t=e.sent,a=t.vacancies.map((function(e){return e.is_jun=!0,e})),e.next=6,this.getVacanciesStep();case 6:if(n=e.sent,a=[].concat(Object(w.a)(a),Object(w.a)(n.vacancies)),i=n.pagesLeft,!window.LOAD_ALL_DATA){e.next=19;break}case 10:if(!(--i>0)){e.next=19;break}return e.next=13,this.getVacanciesStep(i);case 13:if((r=e.sent).items){e.next=16;break}return e.abrupt("break",19);case 16:(s=a).push.apply(s,Object(w.a)(r.items)),e.next=10;break;case 19:return this.setState({vacancies:a}),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVacanciesStep",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,a,n,i,s=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:0,a=s.length>1&&void 0!==s[1]?s[1]:"between1And3",e.next=4,fetch("https://api.hh.ru/vacancies?text=frontend&".concat(this.props.section.location,"&per_page=").concat(window.LOAD_ALL_DATA?100:3,"&page=").concat(t,"&experience=").concat(a));case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:return i=e.sent,e.abrupt("return",{vacancies:i.items,pagesLeft:i.pages});case 12:return e.abrupt("return",new Error("\u041e\u0448\u0438\u0431\u043a\u0430 HTTP: "+n.status));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"groupVacancies",value:function(e){var t=this,a={},n=[],i=new Date(new Date-24*window.NEW_IN_DAYS*60*60*1e3);return e.forEach((function(e){if(e.name.match(window.NECESSARY)&&!e.name.match(window.UNNECESSARY)){var s=e.employer.id;a.hasOwnProperty(s)||(a[s]={id:s,name:e.employer.name,sort:U,items:[],haveVisibleItem:!1});var r=a[s];if(!r.items.some((function(t){return t.name===e.name}))){e.sort=U,t.props.blacklist[t.props.section.id].hasOwnProperty(e.id)?e.is_del=!0:r.haveVisibleItem=!0;var c=e.is_jun||e.name.match(window.JUNIOR);new Date(e.created_at)>i&&o(3,"is_new"),c&&o(2,"is_jun"),e.salary&&o(1,"is_salary"),r.items.push(e),n.push(e)}}function o(t,a){var n={name:a,value:t};r.sort.value<t&&(r.sort=n),e.sort.value<t&&(e.sort=n),r[a]=!0,e[a]=!0}})),this.setState({vacancies:n}),this.groupItems(Object.values(a))}},{key:"groupItems",value:function(e){var t=this,a={};for(var n in e.forEach((function(e){var n,i;t.props.favorites[t.props.section.id].hasOwnProperty(e.id)?(n="is_fav",i=4):(n=e.sort.name,i=e.sort.value),a[n]||(a[n]=t.createGroup(n,i)),a[n].items.push(e)})),a){var i=a[n];i.haveVisibleItem=Object(p.checkItems)(i.items,"haveVisibleItem")}return Object(p.sortByReduction)(Object.values(a),"sortValue")}},{key:"createGroup",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{name:e,sortValue:t,haveVisibleItem:!0,items:a}}},{key:"renderItemsOnLoad",value:function(){return this.visibleVacancies?this.renderItems():this.renderItemsIsEmpty()}},{key:"renderItems",value:function(){var e=this;return this.state.groups.map((function(t,a){return t.haveVisibleItem&&i.a.createElement(Y,{itemsList:t,section:e.props.section,key:a,handleClickAction:function(t,a){return e.props.handleClickAction(t,e.props.section.id,a)}})}))}},{key:"renderItemsIsEmpty",value:function(){return i.a.createElement("h3",null,"\u041f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e :(")}},{key:"render",value:function(){return i.a.createElement("section",null,this.state.isLoaded?this.renderItemsOnLoad():i.a.createElement("h3",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))}}]),a}(i.a.Component),q=a(18),F=a.n(q);function W(e){var t=e.section;return i.a.createElement("div",{className:t.is_active?F.a.active:F.a.title,onClick:function(){t.is_active||e.handleClick(t.id)}},t.name,(t.is_active||t.groups)&&i.a.createElement("span",null,": ",t.visibleVacancies>0?t.visibleVacancies:"..."))}var Z=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).props.locations[0].is_active=!0,n.state={sections:n.props.locations,activeSectionId:n.props.locations[0].id},n.handleLoaded=n.handleLoaded.bind(Object(m.a)(n)),n.handleClickSectionTitle=n.handleClickSectionTitle.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"handleClickSectionTitle",value:function(e){var t,a,n,i=this.state.sections,s=Object(j.a)(i);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.id===e&&(t=r),r.id===this.state.activeSectionId&&(a=r),t&&a)break}}catch(c){s.e(c)}finally{s.f()}t.is_active=!0,a.is_active=!1,this.setState({sections:i,activeSectionId:e})}},{key:"handleLoaded",value:function(e,t){var a=this.state.sections,n=a.find((function(t){return t.id===e}));for(var i in t)n[i]=t[i];this.setState({sections:a})}},{key:"render",value:function(){var e=this;return i.a.createElement("main",null,i.a.createElement("div",{className:E.a.nav},this.state.sections.map((function(t,a){return i.a.createElement(W,{section:t,quantity:e.state.activeQuantity,handleClick:e.handleClickSectionTitle,key:a})}))),this.state.sections.map((function(t,a){return t.is_active&&i.a.createElement(X,{section:t,key:a,handleLoaded:e.handleLoaded,handleClickAction:e.props.handleClickAction,favorites:e.props.favorites,blacklist:e.props.blacklist})})))}}]),a}(i.a.Component),K=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={favorites:n.getDataFromStorage("favorites"),blacklist:n.getDataFromStorage("blacklist")},n.clearItems=n.clearItems.bind(Object(m.a)(n)),n.handleClickAction=n.handleClickAction.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"isBtnActive",value:function(e){for(var t in this.state[e])if(Object.keys(this.state[e][t]).length)return!0;return!1}},{key:"getDataFromStorage",value:function(e){var t=Object(p.getLS)(e),a=this.createEmptyStore(e);return!t||Object.keys(t)<Object.keys(a)?a:t}},{key:"createEmptyStore",value:function(){var e={};return this.props.locations.forEach((function(t){return e[t.id]={}})),e}},{key:"handleClickAction",value:function(e,t,a){var n=Object(o.a)({},this.state[e][t]);n.hasOwnProperty(a.id)?delete n[a.id]:n[a.id]=a.parentId;var i=Object(o.a)({},this.state[e]);i[t]=n,this.setItems(e,i)}},{key:"clearItems",value:function(e){var t=this.createEmptyStore(e);this.setItems(e,t)}},{key:"setItems",value:function(e,t){this.setState(Object(c.a)({},e,t)),Object(p.setLS)(e,t)}},{key:"render",value:function(){return i.a.createElement("div",{className:"main"},i.a.createElement(g,{clearItems:this.clearItems,isFavActive:this.isBtnActive("favorites"),isDelActive:this.isBtnActive("blacklist")}),i.a.createElement(Z,{handleClickAction:this.handleClickAction,locations:this.props.locations,favorites:this.state.favorites,blacklist:this.state.blacklist}))}}]),a}(i.a.Component);function z(e){return i.a.createElement("div",null,i.a.createElement(K,{locations:e.locations}))}window.LOAD_ALL_DATA=!0;window.NEW_IN_DAYS=1,window.NECESSARY=new RegExp(/front|\u0444\u0440\u043e\u043d\u0442|js|javascript/i),window.UNNECESSARY=new RegExp(/backend|fullstack|SQL|lead|\u0432\u0435\u0434\u0443\u0449\u0438\u0439|angular/i),window.JUNIOR=new RegExp(/junior|\u0441\u0442\u0430\u0436\u0435\u0440|\u043c\u043b\u0430\u0434\u0448\u0438\u0439/i),window.COMPANY_BLACKLIST=["4932875","46587"],r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(z,{locations:[{id:"ekb",name:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433",location:"area=3"},{id:"remote",name:"\u0423\u0434\u0430\u043b\u0451\u043d\u043d\u043e",location:"schedule=remote"}]})),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.34530ab1.chunk.js.map